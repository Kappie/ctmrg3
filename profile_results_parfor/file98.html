<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /><title>Function details for Job.Job&gt;Job.attachRequiredFiles</title><link rel="stylesheet" href="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">Job.Job&gt;Job.attachRequiredFiles (1 call, 4.735 sec)</span><br/><i>Generated 24-Feb-2017 18:32:57 using cpu time.</i><br/>subfunction in file /opt/MATLAB/R2015a/toolbox/distcomp/cluster/+parallel/@Job/Job.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file157.html">Job.Job&gt;Job.submit</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line Number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Code</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line691">691</a></td><td class="td-linebottomrt"><pre>attachedFiles = arrayfun( ...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">4.683 s</td><td class="td-linebottomrt" class="td-linebottomrt">98.9%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=99 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line749">749</a></td><td class="td-linebottomrt"><pre>job.AttachedFilePaths = filePa...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt" class="td-linebottomrt">0.4%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line731">731</a></td><td class="td-linebottomrt"><pre>[relativePaths, filePathMap] =...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt" class="td-linebottomrt">0.4%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line718">718</a></td><td class="td-linebottomrt"><pre>attachedFiles = ...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt" class="td-linebottomrt">0.4%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line754">754</a></td><td class="td-linebottomrt"><pre>end</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt" class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">4.735 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file867.html">...acheDependentFiles(taskFunctionCache)</a></td><td class="td-linebottomrt">anonymous function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">4.665 s</td><td class="td-linebottomrt">98.5%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=99 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file876.html">...dFiles.generateTempDirectoryStructure</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt">0.4%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file869.html">...AttachedFiles.filterToolboxAndBuiltin</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt">0.4%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file662.html">Job.Job&gt;Job.get.Tasks</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt">0.4%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file507.html">onCleanup&gt;onCleanup.delete</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file881.html">...SCommunicatingJob.attachFileDataToJob</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file880.html">AttachedFiles&gt;AttachedFiles.zipFiles</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file29.html">...t;AttachedFiles.copyAllFilesToTempDir</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file872.html">...tachedFiles.removeFilesInAttachedDirs</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file871.html">...;AttachedFiles.addAuthFilesIfDeployed</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file84.html">cell.unique</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file696.html">Job.Job&gt;Job.hSetProperty</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file868.html">Job.Job&gt;iGetDependenciesOfAttachedFiles</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file723.html">...acheDependentFiles(taskFunctionCache)</a></td><td class="td-linebottomrt">anonymous function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file722.html">...t;TaskFunctionCache.TaskFunctionCache</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file646.html">CJSJobMixin&gt;CJSJobMixin.hGetProperty</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">3</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0.017 s</td><td class="td-linebottomrt">0.4%</td><td class="td-linebottomrt"><img src="file:////opt/MATLAB/R2015a/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">4.735 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>Code Analyzer results</strong><br/>No Code Analyzer messages.<div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory <br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Total lines in function</td><td class="td-linebottomrt">74</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">53</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">21</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">17</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">4</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">80.95 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><table id="FunctionListingTable"><tr style="height:20px;"><th><pre><span style="color:#FF0000;">time</span> </pre></th><th><pre><span style="color:#0000FF;">calls</span> </pre></th><th class="leftAligned" COLSPAN=2><pre><span> line</span></pre></th></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 681</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        function attachRequiredFiles( job )</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 682</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % Template method that attaches all required files to the job, automatically</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 683</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % calculating dependencies for all the job's tasks if that feature is</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 684</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % enabled. The method then delegates to its subclasses to actually attach the</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 685</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">        % list of files and the raw bytes of the zip archive.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 686</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            if job.AutoAttachFiles </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 687</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                taskFunctionCache = parallel.internal.cluster.TaskFunctionCache; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 688</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % We want to cache the analyzed task functions per job submission.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 689</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % We do not want to cache between submissions, as the code may have</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 690</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % changed in that time.</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  4.68 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 691</span> <a name="Line691"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FF8080; padding:1px;">                attachedFiles = arrayfun( ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 692</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FF8080; padding:1px;">                    @(t) t.hCalculateAndCacheDependentFiles( taskFunctionCache ), ...</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 693</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FF8080; padding:1px;">                        job.Tasks, 'UniformOutput', false );</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 694</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % We also want to calculate the dependencies of the manually</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 695</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % attached files of the job.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 696</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                jobDependencies = iGetDependenciesOfAttachedFiles( job.AttachedFiles ); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 697</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                attachedFiles = [ vertcat(attachedFiles{:}); jobDependencies(:) ]; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 698</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % We are including the tasks' dependent files here so that getting all</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 699</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % the dependent files of a job does not require looping over all the</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 700</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % tasks. See g978825.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 701</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                job.DependentFiles = attachedFiles; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 702</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            else</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 703</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % For batch the batch functions for all the tasks are stored on the</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 704</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % job's dependent files.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 705</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                attachedFiles = job.DependentFiles;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 706</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">            end</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 707</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 708</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % Join the manually attached files and their dependencies with the</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 709</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % automatically attached files.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 710</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            attachedFiles = [ attachedFiles; job.AttachedFiles ]; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 711</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 712</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % And now make sure the list of attached files is unique.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 713</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            attachedFiles = unique( attachedFiles, 'stable' ); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 714</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 715</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % Toolbox functions and built-ins already exist on the worker, so</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 716</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % remove these from the list. It is also not possible to copy</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 717</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % built-ins, so these must be filtered here.</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.02 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 718</span> <a name="Line718"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            attachedFiles = ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 719</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                parallel.internal.apishared.AttachedFiles.filterToolboxAndBuiltin( attachedFiles );</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 720</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 721</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % If we are deployed we need to add the relevant .auth files.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 722</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            attachedFiles = ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 723</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                parallel.internal.apishared.AttachedFiles.addAuthFilesIfDeployed( attachedFiles );</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 724</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 725</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % (g1026876): We've got to remove files in attached directories from this list.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 726</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            attachedFiles = ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 727</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                parallel.internal.apishared.AttachedFiles.removeFilesInAttachedDirs( attachedFiles );</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 728</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 729</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % Transform the AttachedFile paths to relative paths, so we can</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 730</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % maintain their structure in the zip file.</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.02 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 731</span> <a name="Line731"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            [relativePaths, filePathMap] = ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 732</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                parallel.internal.apishared.AttachedFiles.generateTempDirectoryStructure( ...</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 733</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                        attachedFiles );</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 734</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 735</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % Copy the AttachedFiles to a temporary location.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 736</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            [tempDir, tempCleanup] = ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 737</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                parallel.internal.apishared.AttachedFiles.copyAllFilesToTempDir( ...</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 738</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    attachedFiles, relativePaths ); %#ok&lt;ASGLU&gt;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 739</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 740</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % zip() will only maintain relative paths, files specified by</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 741</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % absolute paths are stored in the root of the archive, which</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 742</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % we don't want. We need to pass the tempdir to zipFiles, so</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 743</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % that the relative paths can be resolved.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 744</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            filedata = ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 745</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                parallel.internal.apishared.AttachedFiles.zipFiles( relativePaths, tempDir );</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 746</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 747</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % Set the relative file paths on the job so that the</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 748</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % worker can find the attached files at the other end.</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.02 </span></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 749</span> <a name="Line749"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            job.AttachedFilePaths = filePathMap; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 750</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 751</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % Now zip up the files and attach them to the job.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 752</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % CJS and MJS do this differently, so call a protected method.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 753</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            job.attachFileDataToJob( filedata ); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">      1 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 754</span> <a name="Line754"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        end </span><br/></pre></td></tr></table><p><p>Other subfunctions in this file are not included in this listing.</body></html>